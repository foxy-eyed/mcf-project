# ДЗ#4

Содержание
 - [Описание проблемы](#описание-проблемы)
 - [Предложения по исправлению ситуации](#предложения-по-исправлению-ситуации)
 - [Расчёт Instability](#расчёт-instability)

## Описание проблемы

**Цель задания** — необходимо исправить систему, которую сделали до нас.

В качестве **исходной системы** взяла систему из задания, т.к. мои системы из нулевой и первой домашки «не бьются»
с целевой из-за нейминга и критериев разбиения на контексты — слишком сложно проецировать одно в другое).

В качестве **целевой** — система из третьей домашки, скорректированная после разбора
(дополнительно для уменьшения когнитивной нагрузки перекрасила блоки и подогнала позиционирование сервисов под источник).

| Source                                                                                            | Target                                                                                            |
|---------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
| ![Source](https://github.com/foxy-eyed/mcf-project/blob/hw-4/homework-4/img/source_structure.jpg) | ![Target](https://github.com/foxy-eyed/mcf-project/blob/hw-4/homework-4/img/target_structure.jpg) |

### Проблемы, найденные в исходной системе

1. Матчинг внутри монолита исполнения заказов.
   - Объединили Core-поддомен с растущей сложностью с Generic-поддоменами исполнения услуг и 
контролем качества => расхождение характеристик в одном монолите;
   - Под характристики матчинга требуется специфический архитектурный стиль и база;
   - Команда, занимающаяся матчингом, говорит на другом языке (другой контекст);
2. Энтити-сервис воркеров, который является источником информации о воркерах для всех сервисов.
Любое изменение структуры данных потенциально создает риск для работы всех сервисов, которые забирают данные о воркерах.
Высокая связанность между энтити-сервисом воркеров и его консьюмерами увеличивает глобальную сложность системы.
Отказ сервиса сломает всю систему.
3. Общий сервис биллинга для воркеров и клиентов.
   - Различающиеся архитектурные характеристики (разная частота деплоев);
   - Нарушаем CatFinCompliance из-за общей базы;
   - Разные контексты.

## Предложения по исправлению ситуации

![Transformation](https://github.com/foxy-eyed/mcf-project/blob/hw-4/homework-4/img/transformation.jpg)

1. Выносим матчинг в отдельный сервис.
2. Энтити-сервис воркеров объединяем с сервисом Скоринга, который будет асинхронно стримить данные о воркерах в 
сервис Матчинга и сервис Исполнения заказов.
3. Разделяем общий сервис расчётов с воркерами и клиентами на два.

## Расчёт Instability

### Instability энтити-сервиса воркеров до ликвидации

![Entity Service Instability](https://github.com/foxy-eyed/mcf-project/blob/hw-4/homework-4/img/entity_service_instability.jpg)

### Instability матчера после вынесения

![Matcher Instability](https://github.com/foxy-eyed/mcf-project/blob/hw-4/homework-4/img/matcher_instability.jpg)

### Instability сервисов расчётов

Тут ничего не поменяется — у сервисов после разделения будет по одной входящей связи и 0 исходящих, 
так же как было до разделения. Instability = 0.

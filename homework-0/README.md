# Анализ систем ДЗ#0

## Event Storming Diagram
Чтобы подступиться к задаче, нужен был какой-то фреймворк. Вспомнила про Event Storming. Ниже моя попытка выделить из 
пользовательских историй доменные события и сгруппировать их в контексты.

![Event Storming Diagram](https://github.com/foxy-eyed/mcf-project/blob/main/homework-0/event_storming.jpg)

## Предложения по реализации

### Структура
Потенциально полученные контексты могут быть претендентами на выделение в отдельный микросервисы, но я предлагаю 
выделить на данный момент только три сервиса (фиолетовые прямоугольники на диаграмме):

  - **Core-монолит**, закрывающий ключевую функциольность системы — заказ услуг и их исполнение. Сюда войдут следующие контексты:
    - Кабинет клиента;
    - Кабинет воркера;
    - BackOffice для менеджеров;
    - Биллинг;
    - “Инновационный” матчер;
  - **Найм воркеров**;
  - **Склад**.

Каждый сервис имеет свой persistence и собственную базу данных.

Контексты внутри каждого сервиса требуется реализовать в виде отдельных модулей, минимизировав связанность.

### Коммуникации
Коммуникаций между сервисами не так много (на схеме отмечены фиолетовым пунктиром):
  - стримить данные о принятых воркерах из **Найма** в **Core-монолит** после приёма;
  - стримить данные о заказах, взятых в работу, из **Core-монолита** на **Склад** для комплектации.

Для начала достаточно будет сделать их синхронными запросами к Internal REST API сервисов.

### Примечания
Распиливать core-монолит на микросервисы сразу я бы не стала:

  - видение продукта со стороны заказчика пока сырое, а будущее продукта и всего бизнес-направления туманно,
  - у компании отсутствует опыт в автоматизации процессов,
  - есть пожелание быстрого старта и проверки гипотез.

Вкладывать много времени и ресурсов на разработку микросервисной архитектуры скорее всего нерационально, и пока 
неочевидна ценность. Нужен MVP, для этих целей больше подойдет монолит — проще и дешевле.

**Склад** и **Найм** — вспомогательные контексты, не особенно связанные с основной функциональностью и легко выносятся, 
поэтому выделяем их сразу. Кроме того, нам не нужно, чтобы основной сервис завалили заявками злобные конкуренты.

Неплохой кандидат на выделение — **Матчер**, но с текущей мизерной функциональностью смысла в вынесении нет.

Сервис **нотификаций** я изначально вынесла тоже отдельно, но потом передумала и решила, что у каждого сервиса будет свой ф-л нотификаций. 
Иначе он получается либо слишком умный и осведомленный (=> сложный), либо бессмысленный.

## Заметки
  - Я бы склонила заказчика вынести [US-250] и [US-260] со всеми вложенными историями из системы и реализовать идею no-code инструментами (нужен рисёч). Мы можем отсылать хуки наружу на события “Заказ выполнен” и “Заказ провален”, на которые будет завязан пересчёт вознаграждений в какой-нибудь условной google sheets. Аргументы:
    - Это побочный ф-л, который не является приоритетным по словам самого заказчика;
    - Простая логика, для которой не потребуется хитрого кода и дальнейшей поддержки;
    - Серая зона — лучше держать отдельно;
    - Озвучена готовность часть процессов вести в условной “тетрадке”.
  - Истории [US-160] и [US-170] — процессы, которые, судя по всему, происходят офлайн и никак не оцифрованы до того момента, как не будут внесены в систему [US-180].
  - [US-081] — не пользовательская история, а скорее ограничение, которое стоит учитывать при выборе решения. В частности, ф-л приема заявок вместе с процессом их рассмотрения имеет смысл сразу же вынести в отдельный микросервис, чтобы его падение в случае DDOS не зааффектило остальные части системы.
  - [US-101] — какая-то ненужная в данный момент техническая изнанка.
